# 毎日TODO
毎日TODOの開発リポジトリです。

開発記録は可能な限り下記に記録していきます。

https://qamentalearning.notion.site/DIG-MVP-13833a605d6280f5b5d1e61b3550ffd0

## アプリ概要
基本的にはTODOアプリです。

特定の日時を対象としたものではなく、定期的なTODOを管理できる事が特徴です。

例えば、毎日薬を飲む、毎週特定の曜日にゴミを出す、毎月特定の日に経費精算をする、隔週で行われる会議などが具体的な管理対象となります。

## ローカル確認方法
01）プロジェクトルートで npm install を実行
```
npm install
```
02）Postgresで mainichi_todo というデータベースを作る

03）migration実行
```
npm run db:migrate
```

04）seed実行
```
npm run db:seed
```

05）frontendディレクトリーで npm install を実行
```
cd frontend
npm install
```

06）frontendディレクトリーでビルド
```
npm run build
```

07）ルートディレクトリーで、サーバー起動
```
cd ../
npm run dev
```

08）localhost:3000にアクセス

[localhost:3000](http://localhost:3000)

## ER図
[毎日ToDo ER図](./ER.md)を参照。

## 機能
### 機能概要
本アプリのTODOは、以下の2つのテーブルで管理されています。
- todo_type
- todo_list

todo_typeには、TODOのタイトルやカテゴリー、リピート期間などが登録されます。

todo_listには、todo_typeのIDと、実行日時、実行済みかどうかが登録されます。

TODOの登録や削除、編集は、該当するtodo_typeのレコードとともに、todo_listのレコードも同時に操作されます。

### TODOの登録
登録日時の次のタイミングのTODOが登録されます。

* 例えば2024年11月13日に登録した場合
  * 毎日のTODOは、2024年11月14日に登録される
  * 毎週のTODOは、2024年11月20日に登録される
  * 隔週のTODOは、2024年11月27日に登録される
  * 3週間おきのTODOは、2024年12月4日に登録される
  * 毎月のTODOは、2024年12月の指定した日に登録される

各TODOには以下のカテゴリーを設けます。
- 投薬
- 買い物
- ゴミ捨て
- 会議
- その他

登録できるリピート期間は
- 毎日
- 毎週
  - 曜日
- 隔週
  - 曜日
- 3週間おき
  - 曜日
- 毎月
  - 特定日付（毎月20日等）

### TODOの実行（未実装）
リスト画面上に表示されていてるTODOは、todo_listのレコードを元に表示されています。
TODOの実行は、画面上の「Done!」ボタンをクリックすることで行われます。
TODOの実行は以下の手順が踏まれます。

1. 該当するtodo_listレコードのcheck_doneがtrueに更新される
2. 紐づけられたtodo_typeのリピート期間に従い、次のTODOがtodo_listに登録される
3. 画面上のTODOリストが更新される
4. 1.のレコードは表示されない

* 例えば2024年11月13日のTODOを実行した場合
  * 毎日のTODOであれば、2024年11月14日が新たに登録される
  * 毎週のTODOであれば、2024年11月20日が新たに登録される
  * 隔週のTODOであれば、2024年11月27日が新たに登録される
  * 3週間おきのTODOであれば、2024年12月4日が新たに登録される
  * 毎月のTODOであれば、2024年12月の指定した日が新たに登録される

### TODOの編集（未実装）
todo_typeのレコードを編集することで、紐づけられているtodo_listのレコードを変更できます。

### TODOの削除（未実装）
todo_typeのレコードを削除することで、紐づけられているtodo_listのレコードを削除できます。

## 将来的な機能として
### 放置期間の管理
紐づけられたtodo_typeが削除されない限り、todo_listのレコードは削除されません。
この特徴を活かし、放置期間が設定されているTODOに対して、通知機能を実装することが考えられます。

## 技術的特記
### バックエンド側
- Postgres
- Knex
- express

バックエンド側はJavascriptで記述。可能であればTypeScriptで書きたい。

### フロントエンド側
- React
- Yamada UI
- Jotai

こちら側はTypeScriptで記述。